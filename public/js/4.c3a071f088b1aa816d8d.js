(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{A9fp:function(e,t,a){"use strict";a.r(t);var o=a("JspL"),r=a("9EAu"),n=a("c8RX"),i=a("OUsP"),l=a("ilaN"),c=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{c(o.next(e))}catch(e){n(e)}}function l(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};const s=["image/jpeg","image/gif","image/png"];var b=o.a.extend({props:{entity:{type:Object,required:!0}},data:()=>({droppable:!1,userState:n.n.state}),computed:{forAlbum(){return"artist"in this.entity},sortFields(){return this.forAlbum?["disc","track"]:["album_id","disc","track"]},backgroundImageUrl(){if(this.forAlbum){const e=this.entity;return e.cover?e.cover:Object(l.k)()}{const e=this.entity;return e.image?e.image:Object(l.k)()}},buttonLabel(){return this.forAlbum?"Play all songs in the album "+this.entity.name:"Play all songs by the artist "+this.entity.name},playbackFunc(){return this.forAlbum?i.h.playAllInAlbum:i.h.playAllByArtist},allowsUpload(){return this.userState.current.is_admin}},methods:{playOrQueue(e){e.metaKey||e.ctrlKey?(console.log("queueStore.queue"),i.h.logrequest("queue"),n.g.queue(Object(r.orderBy)(this.entity.songs,this.sortFields))):(console.log("playbackFunc.call"),i.h.logrequest("playbackFunc"),this.playbackFunc.call(i.h,this.entity,!1))},onDragEnter(){this.droppable=this.allowsUpload},onDragLeave(){this.droppable=!1},onDrop(e){return c(this,void 0,void 0,(function*(){if(this.droppable=!1,this.allowsUpload&&this.validImageDropEvent(e))try{const t=yield l.g.readAsDataUrl(e.dataTransfer.files[0]);this.forAlbum?(this.entity.cover=t,n.a.uploadCover(this.entity,t)):(this.entity.image=t,n.b.uploadImage(this.entity,t))}catch(e){console.error(e)}}))},validImageDropEvent:e=>!(!e.dataTransfer||!e.dataTransfer.items)&&(1===e.dataTransfer.items.length&&("file"===e.dataTransfer.items[0].kind&&!!s.includes(e.dataTransfer.items[0].getAsFile().type)))}}),g=(a("v1Oh"),a("KHd+")),d=Object(g.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"cover",class:{droppable:e.droppable},style:{backgroundImage:"url("+e.backgroundImageUrl+")"}},[a("a",{staticClass:"control control-play font-size-0",attrs:{href:"",role:"button"},on:{click:function(t){return t.preventDefault(),e.playOrQueue(t)},dragenter:function(t){return t.preventDefault(),e.onDragEnter(t)},dragleave:function(t){return t.preventDefault(),e.onDragLeave(t)},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.onDrop(t)},dragover:function(e){e.preventDefault()}}},[e._v("\n    "+e._s(e.buttonLabel)+"\n  ")])])}),[],!1,null,"479e77b6",null);t.default=d.exports},HLdE:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,'[data-v-479e77b6]:root{--color-text-primary:#fff;--color-text-secondary:hsla(0,0%,100%,0.7);--color-bg-primary:#181818;--color-bg-secondary:hsla(0,0%,100%,0.025);--color-highlight:#ff7d2e;--bg-image:none;--bg-position:center;--bg-attachment:fixed;--bg-size:cover;--font-family:system,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;--font-weight-thin:100;--font-weight-light:300;--font-weight-normal:500;--header-height:48px;--footer-height:64px;--footer-height-mobile:74px;--extra-panel-width:334px;--color-black:#181818;--color-maroon:#bf2043;--color-green:#56a052;--color-blue:#0191f7;--color-red:#c34848}:root[data-theme=violet][data-v-479e77b6]{--color-bg-primary:#31094e}:root[data-theme=oak][data-v-479e77b6]{--color-bg-primary:#560d25}:root[data-theme=slate][data-v-479e77b6]{--color-bg-primary:#29434e}:root[data-theme=madison][data-v-479e77b6]{--color-bg-primary:#0e3463;--color-highlight:#fbab18}:root[data-theme=astronaut][data-v-479e77b6]{--color-bg-primary:#2a3074}:root[data-theme=chocolate][data-v-479e77b6]{--color-bg-primary:#3f2724}:root[data-theme=laura][data-v-479e77b6]{--color-bg-primary:#126673;--color-highlight:rgba(10,244,255,0.64)}:root[data-theme=rose-petals][data-v-479e77b6]{--bg-image:url(/img/themes/bg-rose-petals.svg);--color-bg-primary:#7d083b}:root[data-theme=purple-waves][data-v-479e77b6]{--color-bg-primary:#44115c;--bg-image:url(/img/themes/bg-purple-waves.svg)}:root[data-theme=cat][data-v-479e77b6]{--bg-image:url(/img/themes/bg-cat.jpg);--bg-position:left;--color-bg-primary:#000}:root[data-theme=pop-culture][data-v-479e77b6]{--bg-image:url(/img/themes/bg-pop-culture.jpg);--color-bg-primary:#ad0937;--color-highlight:rgba(234,208,110,0.9)}:root[data-theme=jungle][data-v-479e77b6]{--bg-image:url(/img/themes/bg-jungle.jpg);--color-bg-primary:#0f0f03}:root[data-theme=mountains][data-v-479e77b6]{--bg-image:url(/img/themes/bg-mountains.jpg);--color-bg-primary:#0e2656}:root[data-theme=pines][data-v-479e77b6]{--bg-image:url(/img/themes/bg-pines.jpg);--color-bg-primary:#06090c;--color-highlight:#5984b9}:root[data-theme=nemo][data-v-479e77b6]{--bg-image:url(/img/themes/bg-nemo.jpg);--color-bg-primary:#031724}.cover[data-v-479e77b6]{position:relative;width:100%;display:block;background-repeat:no-repeat;background-size:cover;background-position:50%}.cover[data-v-479e77b6]:after{content:"";display:block;padding-top:100%}.cover .control[data-v-479e77b6]{display:flex;justify-content:center;align-items:center}.cover .control[data-v-479e77b6],.cover .control[data-v-479e77b6]:before{height:100%;width:100%;position:absolute}.cover .control[data-v-479e77b6]:before{content:"";top:0;background:rgba(0,0,0,.3);opacity:0;z-index:1}.cover .control[data-v-479e77b6]:after{content:"";width:60%;max-width:128px;height:60%;max-height:128px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzIiBoZWlnaHQ9IjEzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTEzLjAyNCA2NS4yNTRMMCAxMzAuNTFWMHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==);background-size:45%;background-position:58% 50%;background-repeat:no-repeat;border-radius:50%;background-color:var(--color-bg-primary);opacity:0;z-index:2}@media (hover:none){.cover .control[data-v-479e77b6]:after{opacity:.5}}.cover .control[data-v-479e77b6]:focus:after,.cover .control[data-v-479e77b6]:focus:before,.cover .control[data-v-479e77b6]:hover:after,.cover .control[data-v-479e77b6]:hover:before{transition:opacity .3s;opacity:1}.cover .control[data-v-479e77b6]:active:before{background:rgba(0,0,0,.5)}.cover .control[data-v-479e77b6]:active:after{transform:scale(.9)}.cover .drop-zone[data-v-479e77b6]{font-size:4rem;position:absolute;width:100%;height:100%;display:flex;place-content:center;place-items:center;background:rgba(0,0,0,.7);display:none}.cover.droppable[data-v-479e77b6]{border:2px dotted #fff;filter:brightness(.4)}.cover.droppable .control[data-v-479e77b6]{opacity:0}',""])},f6gz:function(e,t,a){var o=a("HLdE");"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(o,r);o.locals&&(e.exports=o.locals)},v1Oh:function(e,t,a){"use strict";var o=a("f6gz");a.n(o).a}}]);